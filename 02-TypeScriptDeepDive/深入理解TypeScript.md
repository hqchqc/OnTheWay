## ğŸ“˜ TypeScript Deep Dive  

### ğŸ±â€ğŸš€å‰è¨€  
> æœ€å¼€å§‹æ¥è§¦TypeScriptçš„æ—¶å€™è¿˜æ˜¯åˆšè¿›å…¬å¸å®ä¹ çš„æ—¶å€™ï¼Œé‚£æ—¶å€™ç¼–è¯‘å™¨æ€»æ˜¯è«åå…¶å¦™æŠ¥ä¸€äº›é”™è¯¯ï¼Œä¹Ÿçœ‹ä¸æ‡‚ï¼Œåˆ°ç°åœ¨ä¹Ÿæ²¡ç³»ç»Ÿçš„å»å­¦ä¹ ä¸€ä¸‹typescriptï¼Œè°ƒè¯•ä¸äº†çš„è¿˜æ˜¯ä¸€ç›´éƒ½ç”¨anyè§£å†³ï¼Œå“ˆå“ˆå“ˆï¼Œæ€»ä¹‹å‘¢ï¼Œè¿˜æ˜¯è¦æ·±å…¥å­¦ä¹ ä¸€ä¸‹  

### 01-TypeScripté¡¹ç›®  
#### ç¼–è¯‘ä¸Šä¸‹æ–‡  
1. è¿™ä¸ªæ¦‚å¿µå¬èµ·æ¥å¾ˆç†Ÿæ‚‰åˆå¾ˆé™Œç”Ÿï¼Œåœ¨TypeScriptä¸­æˆ‘ä»¬ä¸»è¦ç”¨è¿™ä¸ªæ¦‚å¿µæ¥ç»™æ–‡ä»¶åˆ†ç»„ï¼Œå‘Šè¯‰TypeScriptå“ªäº›æ–‡ä»¶æ˜¯æœ‰æ•ˆçš„ï¼Œå“ªäº›æ˜¯æ— æ•ˆçš„ï¼Œé€šå¸¸é¡¹ç›®ä¸­ä¼šæœ‰ä¸€ä¸ª``tscinfig.json``æ–‡ä»¶åŠ ä»¥åŒºåˆ†  

2. å¯ä»¥é€šè¿‡``compilerOptions``æ¥å®šåˆ¶ç¼–è¯‘é€‰é¡¹
```javascript
{
  "compilerOptions": {

    /* åŸºæœ¬é€‰é¡¹ */
    "target": "es5",                       // æŒ‡å®š ECMAScript ç›®æ ‡ç‰ˆæœ¬: 'ES3' (default), 'ES5', 'ES6'/'ES2015', 'ES2016', 'ES2017', or 'ESNEXT'
    "module": "commonjs",                  // æŒ‡å®šä½¿ç”¨æ¨¡å—: 'commonjs', 'amd', 'system', 'umd' or 'es2015'
    "lib": [],                             // æŒ‡å®šè¦åŒ…å«åœ¨ç¼–è¯‘ä¸­çš„åº“æ–‡ä»¶
    "allowJs": true,                       // å…è®¸ç¼–è¯‘ javascript æ–‡ä»¶
    "checkJs": true,                       // æŠ¥å‘Š javascript æ–‡ä»¶ä¸­çš„é”™è¯¯
    "jsx": "preserve",                     // æŒ‡å®š jsx ä»£ç çš„ç”Ÿæˆ: 'preserve', 'react-native', or 'react'
    "declaration": true,                   // ç”Ÿæˆç›¸åº”çš„ '.d.ts' æ–‡ä»¶
    "sourceMap": true,                     // ç”Ÿæˆç›¸åº”çš„ '.map' æ–‡ä»¶
    "outFile": "./",                       // å°†è¾“å‡ºæ–‡ä»¶åˆå¹¶ä¸ºä¸€ä¸ªæ–‡ä»¶
    "outDir": "./",                        // æŒ‡å®šè¾“å‡ºç›®å½•
    "rootDir": "./",                       // ç”¨æ¥æ§åˆ¶è¾“å‡ºç›®å½•ç»“æ„ --outDir.
    "removeComments": true,                // åˆ é™¤ç¼–è¯‘åçš„æ‰€æœ‰çš„æ³¨é‡Š
    "noEmit": true,                        // ä¸ç”Ÿæˆè¾“å‡ºæ–‡ä»¶
    "importHelpers": true,                 // ä» tslib å¯¼å…¥è¾…åŠ©å·¥å…·å‡½æ•°
    "isolatedModules": true,               // å°†æ¯ä¸ªæ–‡ä»¶ä½œä¸ºå•ç‹¬çš„æ¨¡å— ï¼ˆä¸ 'ts.transpileModule' ç±»ä¼¼ï¼‰.

    /* ä¸¥æ ¼çš„ç±»å‹æ£€æŸ¥é€‰é¡¹ */
    "strict": true,                        // å¯ç”¨æ‰€æœ‰ä¸¥æ ¼ç±»å‹æ£€æŸ¥é€‰é¡¹
    "noImplicitAny": true,                 // åœ¨è¡¨è¾¾å¼å’Œå£°æ˜ä¸Šæœ‰éšå«çš„ anyç±»å‹æ—¶æŠ¥é”™
    "strictNullChecks": true,              // å¯ç”¨ä¸¥æ ¼çš„ null æ£€æŸ¥
    "noImplicitThis": true,                // å½“ this è¡¨è¾¾å¼å€¼ä¸º any ç±»å‹çš„æ—¶å€™ï¼Œç”Ÿæˆä¸€ä¸ªé”™è¯¯
    "alwaysStrict": true,                  // ä»¥ä¸¥æ ¼æ¨¡å¼æ£€æŸ¥æ¯ä¸ªæ¨¡å—ï¼Œå¹¶åœ¨æ¯ä¸ªæ–‡ä»¶é‡ŒåŠ å…¥ 'use strict'

    /* é¢å¤–çš„æ£€æŸ¥ */
    "noUnusedLocals": true,                // æœ‰æœªä½¿ç”¨çš„å˜é‡æ—¶ï¼ŒæŠ›å‡ºé”™è¯¯
    "noUnusedParameters": true,            // æœ‰æœªä½¿ç”¨çš„å‚æ•°æ—¶ï¼ŒæŠ›å‡ºé”™è¯¯
    "noImplicitReturns": true,             // å¹¶ä¸æ˜¯æ‰€æœ‰å‡½æ•°é‡Œçš„ä»£ç éƒ½æœ‰è¿”å›å€¼æ—¶ï¼ŒæŠ›å‡ºé”™è¯¯
    "noFallthroughCasesInSwitch": true,    // æŠ¥å‘Š switch è¯­å¥çš„ fallthrough é”™è¯¯ã€‚ï¼ˆå³ï¼Œä¸å…è®¸ switch çš„ case è¯­å¥è´¯ç©¿ï¼‰

    /* æ¨¡å—è§£æé€‰é¡¹ */
    "moduleResolution": "node",            // é€‰æ‹©æ¨¡å—è§£æç­–ç•¥ï¼š 'node' (Node.js) or 'classic' (TypeScript pre-1.6)
    "baseUrl": "./",                       // ç”¨äºè§£æéç›¸å¯¹æ¨¡å—åç§°çš„åŸºç›®å½•
    "paths": {},                           // æ¨¡å—ååˆ°åŸºäº baseUrl çš„è·¯å¾„æ˜ å°„çš„åˆ—è¡¨
    "rootDirs": [],                        // æ ¹æ–‡ä»¶å¤¹åˆ—è¡¨ï¼Œå…¶ç»„åˆå†…å®¹è¡¨ç¤ºé¡¹ç›®è¿è¡Œæ—¶çš„ç»“æ„å†…å®¹
    "typeRoots": [],                       // åŒ…å«ç±»å‹å£°æ˜çš„æ–‡ä»¶åˆ—è¡¨
    "types": [],                           // éœ€è¦åŒ…å«çš„ç±»å‹å£°æ˜æ–‡ä»¶ååˆ—è¡¨
    "allowSyntheticDefaultImports": true,  // å…è®¸ä»æ²¡æœ‰è®¾ç½®é»˜è®¤å¯¼å‡ºçš„æ¨¡å—ä¸­é»˜è®¤å¯¼å…¥ã€‚

    /* Source Map Options */
    "sourceRoot": "./",                    // æŒ‡å®šè°ƒè¯•å™¨åº”è¯¥æ‰¾åˆ° TypeScript æ–‡ä»¶è€Œä¸æ˜¯æºæ–‡ä»¶çš„ä½ç½®
    "mapRoot": "./",                       // æŒ‡å®šè°ƒè¯•å™¨åº”è¯¥æ‰¾åˆ°æ˜ å°„æ–‡ä»¶è€Œä¸æ˜¯ç”Ÿæˆæ–‡ä»¶çš„ä½ç½®
    "inlineSourceMap": true,               // ç”Ÿæˆå•ä¸ª soucemaps æ–‡ä»¶ï¼Œè€Œä¸æ˜¯å°† sourcemaps ç”Ÿæˆä¸åŒçš„æ–‡ä»¶
    "inlineSources": true,                 // å°†ä»£ç ä¸ sourcemaps ç”Ÿæˆåˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œè¦æ±‚åŒæ—¶è®¾ç½®äº† --inlineSourceMap æˆ– --sourceMap å±æ€§

    /* å…¶ä»–é€‰é¡¹ */
    "experimentalDecorators": true,        // å¯ç”¨è£…é¥°å™¨
    "emitDecoratorMetadata": true          // ä¸ºè£…é¥°å™¨æä¾›å…ƒæ•°æ®çš„æ”¯æŒ
  }
}
```  

3. ä¸€èˆ¬æ¥è¯´IDEéƒ½æ”¯æŒå¯¹TypeScriptçš„å³æ—¶ç¼–è¯‘ï¼Œä½†æ˜¯å¦‚æœæƒ³è¦æ‰‹åŠ¨æ‰§è¡Œç¼–è¯‘æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€ä¸‹ä¸¤ç§æ–¹å¼ï¼š  
  3.1 è¿è¡Œ``tsc``ï¼Œå®ƒä¼šåœ¨å½“å‰ç›®å½•æˆ–è€…çˆ¶çº§ç›®å½•å¯»æ‰¾``tsconfig.json``æ–‡ä»¶  
  3.2 è¿è¡Œ``tsc -p ./path-to-projcet-directory``ï¼Œå½“ç„¶è¿™ä¸ªè·¯å¾„ä¹Ÿå¯ä»¥æ˜¯ç»å¯¹è·¯å¾„æˆ–æ˜¯ç›¸å¯¹è·¯å¾„  
  3.3 è¿˜å¯ä»¥ä½¿ç”¨``tsc -w``çš„æ–¹å¼æ¥å¯ç”¨TypeScriptçš„è§‚æµ‹æ¨¡å¼ï¼Œåœ¨æ£€æµ‹åˆ°æ–‡ä»¶æ”¹åŠ¨åï¼Œå®ƒå°†é‡æ–°ç¼–è¯‘  

4. å¯ä»¥åœ¨``tscinfig.json``æ–‡ä»¶ä¸­æ˜¾ç¤ºæŒ‡å®šéœ€è¦ç¼–è¯‘çš„æ–‡ä»¶ï¼ŒåŒæ—¶è¿˜å¯ä»¥ä½¿ç”¨``includes``å’Œ``exclude``é€‰é¡¹æ¥æŒ‡å®šéœ€è¦åŒ…å«å’Œæ’é™¤çš„æ–‡ä»¶  

#### å£°æ˜ç©ºé—´  
1. ç±»å‹å£°æ˜ç©ºé—´ï¼Œä¾‹å¦‚ï¼š
  ```typescript
  class Foo {}
  interface Bar {}
  type Bas = {}
  ```  
ç°åœ¨ä½ å¯ä»¥ä½¿ç”¨``Foo Bar Bas``ä½œä¸ºç±»å‹æ³¨è§£ä½¿ç”¨ï¼Œä¾‹å¦‚ï¼š
  ```typescript
  let foo: Foo;
  let bar: Bar;
  let bas: Bas;
  ```
> æ³¨æ„ï¼š å°½ç®¡æˆ‘ä»¬è¿™é‡Œå®šä¹‰äº† interface Bar ï¼Œä½†æ˜¯æˆ‘ä»¬å¹¶ä¸èƒ½æŠŠå®ƒä½œä¸ºä¸€ä¸ªå˜é‡æ¥ä½¿ç”¨ï¼Œå› ä¸ºå®ƒæ²¡æœ‰å®šä¹‰åœ¨å˜é‡å£°æ˜ç©ºé—´ä¸­

```typescript
  interface Bar {}
  const bar = Bar; // Error: "cannot find name 'Bar'"
```  

2. å˜é‡å£°æ˜ç©ºé—´  
å˜é‡å£°æ˜ç©ºé—´åŒ…å«å¯ç”¨ä½œå˜é‡çš„å†…å®¹ï¼Œä¸Šæ–‡ä¸­çš„``Class Foo``æä¾›äº†ä¸€ä¸ªç±»å‹``Foo``åˆ°ç±»å‹å£°æ˜ç©ºé—´ï¼Œæ­¤å¤–å®ƒåŒæ ·æä¾›äº†ä¸€ä¸ªå˜é‡ Foo åˆ°å˜é‡å£°æ˜ç©ºé—´ï¼Œä¾‹å¦‚ï¼š

```typescript
class Foo {}
const someVar = Foo;
const someOtherVar = 123;
```  

åŒç†çš„ï¼Œä¸€äº›ç”¨``var``å£°æ˜çš„å˜é‡ï¼Œä¹Ÿåªèƒ½ç”¨åœ¨å˜é‡å£°æ˜ç©ºé—´ä¸­ï¼Œä¸èƒ½ç”¨ä½œç±»å‹æ³¨è§£
```typescript
const foo = 123;
let bar: foo; // ERROR: "cannot find name 'foo'"
```

3. è¿™ä¸€å°èŠ‚ä¸»è¦è®²è§£äº†typescriptä¸­å­˜åœ¨ä¸¤ç§å£°æ˜ç©ºé—´ï¼Œä¸€ç§æ˜¯ç±»å‹å£°æ˜ç©ºé—´ï¼Œä¸€ç§æ˜¯å˜é‡å£°æ˜ç©ºé—´ï¼ŒæŸäº›ç‰¹å®šçš„æ“ä½œç¬¦å¯ä»¥å³å­˜åœ¨äºç±»å‹å£°æ˜ç©ºé—´ä¸­ï¼Œä¹Ÿå¯ä»¥å­˜åœ¨äºå˜é‡å£°æ˜ç©ºé—´ä¸­ï¼Œä¾‹å¦‚``class`` ,ä½†æ˜¯ç»å¤§å¤šæ•°è¿˜æ˜¯åªèƒ½å­˜åœ¨ä¸€ä¸ªç©ºé—´ä¸­ï¼Œå˜é‡å°±æ˜¯å˜é‡ï¼Œç±»å‹å°±æ˜¯ç±»å‹  

#### æ¨¡å—  
1. å…¨å±€æ¨¡å—ï¼Œé»˜è®¤æƒ…å†µä¸‹æˆ‘ä»¬å£°æ˜çš„ä¸€äº›å˜é‡å§‹ç»ˆå­˜åœ¨äºå…¨å±€å‘½åç©ºé—´ä¸­ï¼Œä¾‹å¦‚``const foo = 123``  å¦‚æœåœ¨é¡¹ç›®ä¸­ï¼Œæ–°å»ºäº†ä¸€ä¸ªæ–‡ä»¶ï¼Œåˆ™typescriptä¼šå…è®¸ä½ å®šä¹‰ä¸€ä¸ªç›¸åŒçš„å˜é‡ï¼Œæ¯«æ— ç–‘é—®ï¼Œè¿™æ ·æ˜¯å±é™©çš„ï¼Œå› ä¸ºå®ƒä¼šä¸æ–‡ä»¶å†…çš„ä»£ç å‘½åå†²çªï¼Œæ‰€ä»¥å¼•å…¥æ–‡ä»¶æ¨¡å—çš„å®šä¹‰ï¼›  

2. æ–‡ä»¶æ¨¡å—(å¤–éƒ¨æ¨¡å—) å¦‚æœåœ¨ä½ çš„Typescriptæ–‡ä»¶çš„æ ¹çº§åˆ«ä½ç½®å«æœ‰``import``æˆ–è€…``export``,é‚£ä¹ˆå®ƒä¼šåœ¨æ–‡ä»¶ä¸­åˆ›å»ºä¸€ä¸ªæœ¬åœ°çš„ä½œç”¨åŸŸï¼Œæ­¤æ—¶ä½¿ç”¨``import``çš„æ–‡ä»¶ä¼šå°†æ­¤æ–‡ä»¶æ ‡è®°ä¸ºä¸€ä¸ªæ¨¡å—ï¼Œæ–‡ä»¶å†…çš„å®šä¹‰çš„å£°æ˜ä¹Ÿä¸ä¼šæ±¡æŸ“å…¨å±€å‘½åç©ºé—´ï¼›  

3. æ–‡ä»¶æ¨¡å—è¯¦æƒ…ï¼ŒESæ¨¡å—è¯­æ³•
  - ä½¿ç”¨``export``å…³é”®å­—å¯¼å‡ºä¸€ä¸ªå˜é‡æˆ–è€…ç±»å‹
  ```typescript
  export const someVar = 123;
  export type someType = {
    foo: string;
  }
  ```
  - ``export``çš„å†™æ³•é™¤äº†ä¸Šé¢è¿™ç§ï¼Œè¿˜æœ‰å¦å¤–ä¸€ç§
  ```typescript
  const someVar = 123;
  type someType = {
    type: string;
  };

  export {someVar, someType};
  ```

  - ä¹Ÿå¯ä»¥ä½¿ç”¨é‡å‘½åå˜é‡çš„æ–¹å¼å¯¼å‡º
  ```typescript
  const someVar = 123;
  export {someVar as aDifferentName}
  ```

  - ä½¿ç”¨``import``å…³é”®å­—å¯¼å…¥ä¸€ä¸ªå˜é‡æˆ–è€…æ˜¯ç±»å‹
  ```typescript
  import { someVar, someType } form './foo'
  ```

  - é€šè¿‡é‡å‘½åçš„æ–¹å¼å¯¼å…¥å˜é‡æˆ–è€…ç±»å‹
  ```typescript
  import {someVar as aDifferentName} from './foo';
  ```

  - ä½¿ç”¨æ•´ä½“åŠ è½½
  `` import * as foo from './foo' ``
  > åŒæ—¶ä¹Ÿå¯ä»¥ä½¿ç”¨ foo.someVar å’Œ foo.someType ä»¥åŠå…¶å®ƒä»»ä½•ä» foo å¯¼å‡ºçš„å˜é‡æˆ–è€…ç±»å‹

  - åªå¯¼å…¥æ¨¡å—
  ``import 'core-js' ``

  - ä»å…¶ä»–æ¨¡å—å¯¼å…¥åæ•´ä½“å¯¼å‡º
  `` export * from './foo' ``

  - ä»å…¶ä»–æ¨¡å—å¯¼å…¥åéƒ¨åˆ†å¯¼å‡º
  `` export {someVar} from './foo' ``

  - é€šè¿‡é‡å‘½åï¼Œéƒ¨åˆ†åˆ°å¤„ä»å¦ä¸€ä¸ªæ¨¡å—å¯¼å…¥çš„é¡¹ç›®
  `` export { someVar as aDifferentName } from './foo' `` 

  - é»˜è®¤å¯¼å…¥å¯¼å‡º
  ```typescript
  // ä½¿ç”¨ export default
  // 1. åœ¨ä¸€ä¸ªå˜é‡ä¹‹å‰(ä¸éœ€è¦ä½¿ç”¨ let/const/var)
  // 2. åœ¨ä¸€ä¸ªå‡½æ•°ä¹‹å‰
  // 3. åœ¨ä¸€ä¸ªç±»ä¹‹å‰
  export default (someVar = 123)
  
  export default function someFunction() {}

  export default class someClass
  ```

  ```typescript
  // å¯¼å…¥ä½¿ç”¨ import someName from 'someModule' è¯­æ³•

  import someLocalNameForThisFile from './foo';
  ```

