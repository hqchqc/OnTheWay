# Vue 3 + Typescript + Vite

## Vue 3 ç›¸æ¯” Vue 2 å¸¦æ¥çš„æ–°ç‰¹æ€§  

1. ç»„åˆå¼ API  
   åœ¨ Vue2 ç¼–å†™ä»£ç çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¼šå‘ç°ä¸€æ—¦é¡¹ç›®ç¨å¾®åºå¤§ä¹‹åï¼Œé¡¹ç›®ä¸­å®ç°æŸä¸€å—çš„å…·ä½“é€»è¾‘è¢«æ‹†åˆ†åˆ°äº†å¾ˆå¤šåœ°æ–¹ï¼Œæ¯”å¦‚è¯´æˆ‘ä»¬ç°åœ¨æœ‰ä¸€ä¸ªéœ€æ±‚ï¼Œå®ç°3ä¸ªåŠŸèƒ½ï¼š  
   - æ‹‰å–ç”¨æˆ·æ‰€å…·æœ‰çš„å“ªäº›ä»“åº“  
   - æ ¹æ®ç”¨æˆ·è¾“å…¥çš„å€¼è¿‡æ»¤è¿™äº›ä»“åº“  
   - æ›´æ–°ç”¨æˆ·ä»“åº“  
   æˆ‘ä»¬åœ¨ä»£ç å®ç°çš„æ—¶å€™ä¼šå‘ç°ï¼Œè¿™ä¸‰ä¸ªå…¶å®æ˜¯ä¸€æ•´å—å¤§çš„é€»è¾‘ï¼Œä½†æ˜¯æˆ‘ä»¬åœ¨å†™ä»£ç æ—¶å°†å…¶æ‹†åˆ†æˆä¸ºäº†å¥½å¤šéƒ¨åˆ†ï¼Œæ¯”å¦‚è¯´åœ¨``computed``ä¸­å‘èµ·è¯·æ±‚ï¼Œè¯·æ±‚å®Œæˆä¹‹åè°ƒç”¨``mothods``é‡Œé¢çš„ç›¸å…³æ–¹æ³•ï¼Œè¿™æ ·ä¸€æ¥åŒä¸€å—é€»è¾‘è¢«æ‹†åˆ†äº†å¾ˆå¤šéƒ¨åˆ†ï¼Œå½“åç»­æœ‰äººé‡æ–°çœ‹è¿™äº›ä»£ç æ—¶éœ€è¦é¢‘ç¹è·³è½¬ä»£ç ï¼Œååˆ†éº»çƒ¦ï¼Œä¸ºæ­¤å‡ºç°äº†ç»„åˆå¼APIï¼Œ å®ƒæä¾›ä¸€ä¸ªä¸“é—¨çš„åœ°æ–¹è®©æˆ‘ä»¬ç»Ÿä¸€å¤„ç†è¿™äº›é€»è¾‘æƒ…å†µ  
   - é¿å…ä½¿ç”¨``this``ï¼Œå› ä¸ºå®ƒä¸ä¼šæ‰¾åˆ°ç»„ä»¶å®ä¾‹ã€‚``setup``è°ƒç”¨å‘ç”Ÿåœ¨``data``propertyã€``computed``propertyç­‰è¢«è§£æä¹‹å‰ï¼Œæ•…æ— æ³•è·å–  
   - åœ¨3.0ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€ä¸ªæ–°çš„``ref``å‡½æ•°ä½¿ä»»ä½•å“åº”å¼å˜é‡åœ¨ä»»ä½•åœ°æ–¹èµ·ä½œç”¨ï¼Œæ¥å—å‚æ•°å¹¶å°†å…¶åŒ…è£¹åœ¨ä¸€ä¸ªå¸¦æœ‰``value``propertyçš„å¯¹è±¡ä¸­è¿”å›(coffee.gif)  
   - åœ¨``setup``ä¸­æ³¨å†Œç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œç»„åˆå¼ API ä¸Šçš„ç”Ÿå‘½å‘¨æœŸé’©å­ä¸é€‰é¡¹å¼ API çš„åç§°ç›¸åŒï¼Œä½†å‰ç¼€ä¸º onï¼šå³ ``mounted`` çœ‹èµ·æ¥ä¼šåƒ ``onMounted``ã€‚  
   - ``watch``å“åº”å¼æ›´æ”¹ï¼Œå®ƒæ¥å—ä¸‰ä¸ªå‚æ•°
     > 1. ä¸€ä¸ªæƒ³è¦ä¾¦å¬çš„å“åº”å¼å¼•ç”¨æˆ– getter å‡½æ•° 2. ä¸€ä¸ªå›è°ƒ 3.å¯é€‰çš„é…ç½®é€‰é¡¹  
     ```typescript
      import { ref, watch } from 'vue'

      const counter = ref(0)
      watch(counter, (newValue, oldValue) => {
        console.log('The new counter value is: ' + counter.value)
      })
     ```  
     ç­‰æ•ˆAPI  
     ```typescript  
     export default {
        data() {
          return {
            counter: 0
          }
        },
        watch: {
          counter(newValue, oldValue) {
            console.log('The new counter value is: ' + this.counter)
          }
        }
      }
     ```  
  - ç‹¬ç«‹çš„``computed``å±æ€§  
    è¦æ³¨æ„å®ƒè¾“å‡ºçš„æ˜¯ä¸€ä¸ªåªè¯»çš„å“åº”å¼å¼•ç”¨  
    ```typescript
    import { ref, computed } from 'vue'

    const counter = ref(0)
    const twiceTheCounter = computed(() => counter.value * 2)

    counter.value++
    console.log(counter.value) // 1
    console.log(twiceTheCounter.value) // 2
    ```  

2. Teleport  
   ç™¾åº¦ç¿»è¯‘ä¸ºä¼ é€ï¼Œå“ˆå“ˆå“ˆå“ˆï¼Œå¯ä»¥è¯´æ˜¯å¾ˆå½¢è±¡äº†ï¼Œå…¶å®å°±æ˜¯å­—é¢æ„æ€ï¼Œåœ¨ä¸€ä¸ªç»„ä»¶ä¸­å¦‚æœæœ‰ä¸æ–¹ä¾¿åœ¨è¿™ä¸ªç»„ä»¶å±•ç¤ºçš„éƒ¨åˆ†ï¼Œæˆ‘ä»¬å¯ä»¥å°†å®ƒç”¨``teleport``åŒ…èµ·æ¥ï¼Œå¹¶ä½¿ç”¨``to``å±æ€§å‘Šè¯‰å®ƒå°†è¦æŒ‚åœ¨åˆ°ä»€ä¹ˆå…ƒç´ ä¸Šé¢ï¼Œå°±è·Ÿç°åœ¨antdesignçš„``getPopupContainer``ä¸€ä¸ªé“ç†å§  
   1. > ä¸€ä¸ªå¸¸è§çš„åœºæ™¯æ˜¯åˆ›å»ºä¸€ä¸ªåŒ…å«å…¨å±æ¨¡å¼çš„ç»„ä»¶ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä½ å¸Œæœ›æ¨¡æ€æ¡†çš„é€»è¾‘å­˜åœ¨äºç»„ä»¶ä¸­ï¼Œä½†æ˜¯æ¨¡æ€æ¡†çš„å¿«é€Ÿå®šä½å°±å¾ˆéš¾é€šè¿‡ CSS æ¥è§£å†³ï¼Œæˆ–è€…éœ€è¦æ›´æ”¹ç»„ä»¶ç»„åˆã€‚  
   ```html 
    <template>
      <button @click="modalOpen = true">Open full screen modal!</button>
      <teleport to="body">
        <div v-if="modalOpen" class="modal">
          <div>
            I'm a modal!(My parent is "body")
            <HelloWorld msg="teleport" />
            <button @click="modalOpen = false">Close</button>
          </div>
        </div>
      </teleport>
    </template>
    ```  

    2. å½“åœ¨``teleport``ä¸‹è¿˜æœ‰å…¶å®ƒå­ç»„ä»¶æ—¶ï¼Œå­ç»„ä»¶çš„æŒ‚è½½ç‚¹è¿˜æ˜¯ä¼šåœ¨çˆ¶ç»„ä»¶ä¸‹é¢  
    3. å½“æœ‰å¤šä¸ª``teleport``æ—¶ï¼Œé¡ºåºå°±æ˜¯ç®€å•çš„è¿½åŠ â€”â€”ç¨åæŒ‚è½½å°†ä½äºç›®æ ‡å…ƒç´ ä¸­è¾ƒæ—©çš„æŒ‚è½½ä¹‹å  

æ’æ›²  
   1. å½¬å½¬åˆ†æ‰‹äº†å¾ˆéš¾è¿‡ğŸ˜¤  
   2. å›æ¥äº†æœ‰ç‚¹ä¸ä¹ æƒ¯ æƒ³çŒªçŒªæƒ¹~  
   3. è¿™å‡ å¤©ä¹Ÿå¤ªå¿™äº†æ²¡æƒ³æ³•sssss

3. ç‰‡æ®µ  
   è¿™ä¸ªåŠŸèƒ½æŒºå®ç”¨çš„æ„Ÿè§‰ï¼Œä¸ç®¡æ˜¯ç”¨reactè¿˜æ˜¯vue2åœ¨ç»„ä»¶çš„æœ€å¤–é¢æ€»å¾—åŒ…ä¸€å±‚ç»„ä»¶æ€ªåˆ«æ‰­çš„ï¼Œç»ˆäºå¹²æ‰äº† æ”¯æŒå¤šæ ¹èŠ‚ç‚¹å’¯ ğŸ‰  
  
4. è§¦å‘ç»„ä»¶é€‰é¡¹  
   è¿™ä¸€éƒ¨åˆ†æ²¡æœ‰å¤ªç†è§£ä»€ä¹ˆæ„æ€ åŠ äº†æ–°ç‰¹æ€§å˜å¾—æ›´çµæ´»äº†ï¼Ÿ
   1. äº‹ä»¶å  
      æä¾›äº†è‡ªåŠ¨çš„å¤§å°å†™è½¬æ¢ï¼Œå¯ä»¥æŠŠé©¼å³°å¼å‘½åçš„æ—¶é—´è‡ªåŠ¨è¯†åˆ«ä¸ºçŸ­æ¨ªçº¿åˆ†éš”å‘½åçš„äº‹ä»¶é¦
      `` è¿™é‡Œå®˜æ–¹å»ºè®®æˆ‘ä»¬ä½¿ç”¨DOMæ¨¡æ¿æ—¶ ä½¿ç”¨çŸ­æ¨ªçº¿åˆ†éš”å‘½åäº‹ä»¶ç›‘å¬å™¨``  
   2. å®šä¹‰è‡ªå®šä¹‰äº‹ä»¶  
      å¯ä»¥é€šè¿‡``emits``é€‰é¡¹åœ¨ç»„ä»¶ä¸Šå®šä¹‰å‘å‡ºçš„äº‹ä»¶ï¼Œè¿™é‡Œæ¥æ”¶äº†ä¸€ä¸ªæ•°ç»„ 
      ``` å®˜æ–¹å»ºè®®å®šä¹‰æ‰€æœ‰å‘å‡ºçš„äº‹ä»¶ï¼Œä»¥ä¾¿æ›´å¥½åœ°è®°å½•ç»„ä»¶åº”è¯¥å¦‚ä½•å·¥ä½œ``

      ```vue  
      app.component('custom-form', {
        emits: ['inFocus', 'submit']
      })
      ```  
      æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨å¯¹è±¡çš„å½¢å¼åšä¸€äº›æ›´åŠ çµæ´»çš„æ“ä½œ  
      ```vue  
      app.component('custom-form', {
        emits: {
          // æ²¡æœ‰éªŒè¯
          click: null,

          // éªŒè¯ submit äº‹ä»¶
          submit: ({ email, password }) => {
            if (email && password) {
              return true
            } else {
              console.warn('Invalid submit event payload!')
              return false
            }
          }
        },
        methods: {
          submitForm(email, password) {
            this.$emit('submit', { email, password })
          }
        }
      })
      ```  
    3. å…³äº v-model 
       å…è®¸æˆ‘ä»¬è‡ªå®šä¹‰æŒ‡ä»¤ 

5. æ¥è‡ª runtime-core çš„ createRebderer API ,ç”¨äºåˆ›å»ºè‡ªå®šä¹‰æ¸²æŸ“å™¨  
   è¿™é‡Œè·³åˆ°äº†ä¸€ä¸ªgithubçš„é“¾æ¥ `` https://github.com/vuejs/vue-next/tree/master/packages/runtime-core `` åº”è¯¥å’Œä½¿ç”¨createAppä»£æ›¿ä¹‹å‰çš„renderæœ‰å…³  

6. å•æ–‡ä»¶ç»„ä»¶ç»„åˆå¼APIè¯­æ³•ç³–(<script setup>)  
   å’Œä¹‹å‰ç»„åˆå¼APIçš„å†…å®¹å·®ä¸å¤šï¼Œä¸»è¦æ˜¯è¯¦ç»†ä»‹ç»äº†ä¸€ä¸‹setupé‡Œè¾¹å¯ä»¥åšä»€ä¹ˆ


   
